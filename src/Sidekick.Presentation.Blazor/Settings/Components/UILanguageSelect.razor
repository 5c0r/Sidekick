@inherits MudSelect<string>

<MudSelect T="string"
           Label="@Resources.Language_UI"
           Variant="Variant.Filled"
           Value="Value"
           For="For"
           ValueChanged="ValueChanged">
    @foreach (var option in Options)
    {
        <MudSelectItem Value="@option.Key">@option.Value</MudSelectItem>
    }
</MudSelect>

@code {
    [Inject] private SettingsResources Resources { get; set; }
    [Inject] private IMediator Mediator { get; set; }

    private Dictionary<string, string> Options { get; set; }

    protected override async Task OnInitializedAsync()
    {
        var languages = await Mediator.Send(new Sidekick.Domain.Localization.GetUiLanguagesQuery());
        Options = languages.ToDictionary(x => x.Name, x => x.NativeName.First().ToString().ToUpper() + x.NativeName[1..]);

        await base.OnInitializedAsync();
    }
}
